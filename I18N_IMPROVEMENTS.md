# I18n –£–ª—É—á—à–µ–Ω–∏—è - –ò—Ç–æ–≥–æ–≤—ã–π –û—Ç—á–µ—Ç

## ‚úÖ –ß—Ç–æ –ë—ã–ª–æ –°–¥–µ–ª–∞–Ω–æ

### 1. **–¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –°–µ—Ä–≤–∏—Å** (`TypedI18nService`)
- ‚úÖ –û–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ `I18nService` —Å —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é
- ‚úÖ –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è –∫–ª—é—á–µ–π –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥—ã

### 2. **TypeScript –¢–∏–ø—ã** (`translations.types.ts`)
- ‚úÖ –¢–∏–ø—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã JSON —Ñ–∞–π–ª–æ–≤
- ‚úÖ –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π —Ç–∏–ø `Paths` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—É—Ç–µ–π
- ‚úÖ –¢–∏–ø `TranslationKey` –¥–ª—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–ª—é—á–µ–π

### 3. **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ö–ª—é—á–µ–π** (`translation-keys.constants.ts`)
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏
- ‚úÖ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–æ–º–µ–Ω–∞–º (AUTH, COMMON, VALIDATION)

### 4. **–£–ª—É—á—à–µ–Ω–Ω—ã–π –ú–æ–¥—É–ª—å** (`i18n.module.ts`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `@Global()` –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å –¥–ª—è dev/prod –æ–∫—Ä—É–∂–µ–Ω–∏–π
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω `TypedI18nService`

### 5. **–î–æ–±–∞–≤–ª–µ–Ω—ã –§–∞–π–ª—ã –ü–µ—Ä–µ–≤–æ–¥–æ–≤**
- ‚úÖ `validation.json` –¥–ª—è –æ–±–æ–∏—Ö —è–∑—ã–∫–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã `common.json` —Å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–º–∏ –∫–ª—é—á–∞–º–∏

### 6. **Barrel Export** (`index.ts`)
- ‚úÖ –£–¥–æ–±–Ω—ã–π –∏–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ i18n

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü–æ—Å–ª–µ –£–ª—É—á—à–µ–Ω–∏–π

```
src/core/i18n/
‚îú‚îÄ‚îÄ en/
‚îÇ   ‚îú‚îÄ‚îÄ auth.json
‚îÇ   ‚îú‚îÄ‚îÄ common.json
‚îÇ   ‚îî‚îÄ‚îÄ validation.json ‚úÖ NEW
‚îú‚îÄ‚îÄ ru/
‚îÇ   ‚îú‚îÄ‚îÄ auth.json
‚îÇ   ‚îú‚îÄ‚îÄ common.json
‚îÇ   ‚îî‚îÄ‚îÄ validation.json ‚úÖ NEW
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îî‚îÄ‚îÄ translations.types.ts ‚úÖ NEW - –¢–∏–ø—ã –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è
‚îú‚îÄ‚îÄ constants/
‚îÇ   ‚îî‚îÄ‚îÄ translation-keys.constants.ts ‚úÖ NEW - –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–ª—é—á–µ–π
‚îú‚îÄ‚îÄ examples/
‚îÇ   ‚îî‚îÄ‚îÄ usage.example.ts ‚úÖ NEW - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ i18n.module.ts ‚úÖ IMPROVED
‚îú‚îÄ‚îÄ i18n.service.ts ‚úÖ NEW - –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ index.ts ‚úÖ NEW - Barrel export
‚îî‚îÄ‚îÄ README.md ‚úÖ NEW - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üéØ –ö–∞–∫ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–µ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```typescript
import { TypedI18nService } from './core/i18n';

@Injectable()
export class AuthService {
  constructor(private readonly i18nService: TypedI18nService) {}

  async register() {
    // ‚úÖ –ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å 'auth.success.'
    // IDE –ø–æ–∫–∞–∂–µ—Ç –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ: registered, logged_in
    const message = await this.i18nService.translateAsync('auth.success.registered');
  }
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –° –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏

```typescript
import { TypedI18nService, AUTH_TRANSLATION_KEYS } from './core/i18n';

@Injectable()
export class AuthService {
  constructor(private readonly i18nService: TypedI18nService) {}

  async login() {
    // ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç
    const message = await this.i18nService.translateAsync(
      AUTH_TRANSLATION_KEYS.errors.invalid_credentials
    );
  }
}
```

## üîç –î–æ—Å—Ç—É–ø–Ω—ã–µ –ö–ª—é—á–∏ (–ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ)

–ü—Ä–∏ –≤–≤–æ–¥–µ `this.i18nService.translate('auth.success.` IDE –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ `registered`
- ‚úÖ `logged_in`

–ü—Ä–∏ –≤–≤–æ–¥–µ `this.i18nService.translate('auth.errors.` IDE –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ `invalid_credentials`
- ‚úÖ `user_exists`
- ‚úÖ `unauthorized`

–ü—Ä–∏ –≤–≤–æ–¥–µ `this.i18nService.translate('common.errors.` IDE –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ `not_found`
- ‚úÖ `internal_error`
- ‚úÖ `validation_failed`
- ‚úÖ `bad_request`
- ‚úÖ `unauthorized`
- ‚úÖ `forbidden`
- ‚úÖ `conflict`

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ó–∞–º–µ—á–∞–Ω–∏—è

### –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ IDE

TypeScript –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è:
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ TypeScript —Å–µ—Ä–≤–µ—Ä–∞ –≤ IDE
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ–∞–π–ª—ã —Ç–∏–ø–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—á–∫—É –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–ª–æ–∂–µ–Ω–Ω—ã–º —Å–≤–æ–π—Å—Ç–≤–∞–º

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è TypeScript

- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ø–æ–ª–Ω—ã—Ö –ø—É—Ç–µ–π: `'auth.success.registered'`
- –î–ª—è —á–∞—Å—Ç–∏—á–Ω—ã—Ö –ø—É—Ç–µ–π (`'auth.success.'`) –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω–æ
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –ª—É—á—à–µ–≥–æ –æ–ø—ã—Ç–∞

## üöÄ –ú–∏–≥—Ä–∞—Ü–∏—è –°—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ö–æ–¥–∞

### –®–∞–≥ 1: –ó–∞–º–µ–Ω–∏—Ç—å –ò–º–ø–æ—Ä—Ç—ã

```typescript
// –ë—ã–ª–æ
import { I18nService } from 'nestjs-i18n';

// –°—Ç–∞–ª–æ
import { TypedI18nService } from './core/i18n';
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å –¢–∏–ø—ã

```typescript
// –ë—ã–ª–æ
constructor(private readonly i18nService: I18nService) {}

// –°—Ç–∞–ª–æ
constructor(private readonly i18nService: TypedI18nService) {}
```

### –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ù–æ–≤—ã–µ –ú–µ—Ç–æ–¥—ã

```typescript
// –û–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
await this.i18nService.translateAsync('auth.errors.user_exists');
this.i18nService.translate('auth.errors.user_exists');
```

## üìù Best Practices

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TypedI18nService** –≤–º–µ—Å—Ç–æ I18nService
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã** –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–ª—é—á–µ–π
3. **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã** –ø–æ –¥–æ–º–µ–Ω–∞–º (auth, common, validation)
4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É** –º–µ–∂–¥—É —è–∑—ã–∫–∞–º–∏
5. **–û–±–Ω–æ–≤–ª—è—Ç—å —Ç–∏–ø—ã** –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∫–ª—é—á–µ–π

### ‚ùå –ù–µ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã –±–µ–∑ —Ç–∏–ø–æ–≤
2. ‚ùå –°–æ–∑–¥–∞–≤–∞—Ç—å –∫–ª—é—á–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
3. ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã
4. ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–ª—É–±–æ–∫—É—é –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å (>3 —É—Ä–æ–≤–Ω–µ–π)

## üîÑ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ù–æ–≤—ã—Ö –ü–µ—Ä–µ–≤–æ–¥–æ–≤

### –ü—Ä–æ—Ü–µ—Å—Å:

1. **–î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á –≤ JSON —Ñ–∞–π–ª—ã** –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤:
```json
// en/auth.json
{
  "errors": {
    "new_error": "New error message"
  }
}
```

2. **–û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã** –≤ `translations.types.ts`:
```typescript
type AuthTranslations = {
  errors: {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
    new_error: string; // –¥–æ–±–∞–≤–∏—Ç—å
  };
};
```

3. **(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É**:
```typescript
export const AUTH_TRANSLATION_KEYS = {
  errors: {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
    new_error: 'auth.errors.new_error', // –¥–æ–±–∞–≤–∏—Ç—å
  },
};
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –£–ª—É—á—à–µ–Ω–∏–π:
- ‚ùå –ù–µ—Ç —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚ùå –ù–µ—Ç –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚ùå –û—à–∏–±–∫–∏ —Ç–æ–ª—å–∫–æ –≤ runtime
- ‚ùå –°—Ç—Ä–æ–∫–æ–≤—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã –≤–µ–∑–¥–µ

### –ü–æ—Å–ª–µ –£–ª—É—á—à–µ–Ω–∏–π:
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ IDE
- ‚úÖ –û—à–∏–±–∫–∏ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å

## üéì –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –°–æ–∑–¥–∞—Ç—å –°–∫—Ä–∏–ø—Ç –í–∞–ª–∏–¥–∞—Ü–∏–∏
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –º–µ–∂–¥—É —è–∑—ã–∫–∞–º–∏:
```bash
npm run validate:i18n
```

### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¢–∏–ø–æ–≤ –∏–∑ JSON
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –∏–∑ JSON —Ñ–∞–π–ª–æ–≤ (–±—É–¥—É—â–µ–µ)

### 3. –õ–∏–Ω—Ç–µ—Ä –¥–ª—è –ü–µ—Ä–µ–≤–æ–¥–æ–≤
ESLint –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–ª—é—á–µ–π

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ö–ª—é—á–µ–π
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–∑ JSON —Ñ–∞–π–ª–æ–≤

